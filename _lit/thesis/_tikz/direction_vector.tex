% !TeX TS-program = xelatex
% Load the required package using class
\documentclass[tikz,fontsize=12pt]{standalone}



	% Additional packages
	\usepackage{etex}
	\usepackage[]{pgfplots}                            % loads all the pgf packages
	\usepackage[]{contour}                           % for outlining text
	\usepackage{tikz-3dplot,comment}
	\usepackage{mdframed, amsmath, amsthm, tcolorbox,tkz-euclide}
	\usepackage{newtxtext}
	\usepackage[cmintegrals,cmbraces,varbb,nosymbolsc]{newtxmath}
	\usepackage{xfrac,chemfig,enumitem}

	\usetikzlibrary{spy,fit,matrix,shapes.callouts,calc,trees,positioning,arrows,chains,shapes.geometric,shapes.multipart,arrows.meta,  decorations.pathreplacing,decorations.text,decorations.pathmorphing,decorations.markings,shapes,matrix,shapes.symbols,patterns,datavisualization,datavisualization.formats.functions,angles,backgrounds, bending}
	
	
	% Settings
	\pgfplotsset{compat=newest}


	% Math macros
	\newcommand{\fett}[1]{\mbox{\boldmath$#1$}} % only a help for smaller commands
	\renewcommand*{\vec}[1]{\lowercase{\fett{\sf#1}}} % vectors
	\newcommand{\mat}[1]{\uppercase{\fett{\sf#1}}} % matrices
	\newcommand{\tena}[1]{\lowercase{\fett{#1}}} % tensors 1. order
	\newcommand{\tenb}[1]{\uppercase{\fett{#1}}} % tensors 2. order
	\newcommand{\tend}[1]{{\uppercase{\fett{\mathcal#1}}}} % tensors 4. Stufe
	\newcommand{\dyad}{\otimes} % dyadic product
	\newcommand{\skp}{\fett{\cdot\,}} % scalar product
	\newcommand{\dskp}{\fett{:\,}} % double scalar product
	\newcommand{\equimust}{\stackrel{\mathrm{!}}{=}}



% ──────────────────────────────────────────────────────────────────────────────────────────────────
% Definition of pic

% width and length of pic arrows
\newlength{\picw}
\newlength{\picl}
\setlength{\picw}{0.13pt}
\setlength{\picl}{0.25pt}

\tikzset{
 xaxis/.pic     ={\path[draw, fill,  pic actions] (0,0,0) -- ++(0,0,\picw/2) -- ++(\picl,0,-\picw/2)-- ++ (-\picl,0,-\picw/2) -- cycle;},
 xaxisflat/.pic ={\path[draw, fill,  pic actions] (0,0,0) -- ++(0,\picw/2,0) -- ++(\picl,-\picw/2,0)-- ++ (-\picl,-\picw/2,0) -- cycle;},
 yaxis/.pic     ={\path[draw, fill,  pic actions] (0,0,0) -- ++(0,0,\picw/2) -- ++(0,\picl,-\picw/2)-- ++ (0,-\picl,-\picw/2) -- cycle;},
 yaxisflat/.pic ={\path[draw, fill,  pic actions] (0,0,0) -- ++(\picw/2,0,0) -- ++(-\picw/2,\picl,0)-- ++ (-\picw/2,-\picl,0) -- cycle;}, 
 zaxis/.pic     ={\path[draw, fill,  pic actions] (0,0,0) -- ++(0,\picw/2,0) -- ++(0,-\picw/2,\picl)-- ++ (0,-\picw/2,-\picl) -- cycle;},
 zaxisrot/.pic  ={\path[draw, fill,  pic actions] (0,0,0) -- ++(-\picw/2,0,0) -- ++(\picw/2,0,\picl)-- ++ (+\picw/2,0,-\picl) -- cycle;}
}


% Setting a right-handed 
%\setlength{\unitlength}{1mm}
%\tdplotsetmaincoords{235}{140}

% Dimensions of the plate
\newlength{\plx}
\newlength{\ply}
\newlength{\plt}

\setlength{\plx}{3pt}
\setlength{\ply}{3pt}
\setlength{\plt}{1.2pt}

% Arrow dimensions
\newlength{\annotdim}
\setlength{\annotdim}{5.5pt}

\newlength{\annottext}
\setlength{\annottext}{9pt}

% Force dimension
\newlength{\forcelen}
\setlength{\forcelen}{1.5pt}

\newlength{\baselen}
\setlength{\baselen}{1pt}

% Right-angle annotation 
\newlength{\ang}
\setlength{\ang}{0pt}
\advance \ang by \forcelen
\divide \ang by 8

	% Drawing settings
	\newlength{\marksize}
	\setlength{\marksize}{2pt}


%		\usetikzlibrary{external}
%		\tikzexternalize


% Flowchart styles
  \tikzset{
   %% Define styles for structural symbols
    %simple node
    snode/.style = {draw,thick,circle, text height = 0.2cm, text width= 0.2cm,inner sep=0, minimum size = 2mm },
    % elements
    myelement/.style = {draw,ultra thick},
    % point load
    pload/.style   = {draw, text width=2cm, rectangle, thick},
    %% Define styles for flowchart symbols
    % basic style
    fbase/.style = {draw, fill=lightgray, inner sep=1mm, semithick},
    % Node label style (plain text)
    nlabel/.style = {label=left:{\small#1}},
    % Process style (Rectangle)
    fproc/.style = {fbase, rectangle,text width=0.75cm},
    % I/O style (Parallelogram)
    fio/.style = {fbase, trapezium, trapezium right angle=120, trapezium left angle=60,text width=0.75cm},
    % Flowchart Connection style (arrows)
    fconc/.style = {semithick, draw,-stealth,label={"#1"}},
    % Simple Connection style (lines)
    sconc/.style = {semithick, draw,label={"#1"}},
    % Terminal style (ellipse)
    fterm/.style = {fbase, ellipse, inner sep=0.5mm},
    % Decision style (diamond)
    fdeci/.style = {fbase, diamond, inner sep=0mm, minimum size=0.3cm},
    % Extra info bracket style (bracket)
    fbrac/.style = {decorate, decoration=brace, thick},
    % Intrinsic subprogram style (Splited rectangle)
    fsubin/.style = {fbase,rectangle split, rectangle split parts=3, rectangle split horizontal,semithick,rectangle split empty part width=0.1cm, inner xsep=0.05cm, inner ysep=1mm},
    % External/internal subprogram (Splited rectangle from top)
    fsubex/.style = {fbase, inner sep=0,rectangle split,rectangle split every empty part={},rectangle split empty part height=0cm,rectangle split empty part width=0ex, rectangle split empty part depth=0cm,,rectangle split parts=2, semithick,text height=-0.3cm},
    % Callout style (comments)
    mycallout/.style = {draw,pattern=north west lines, pattern color=lightgray!75, semithick, rectangle callout, inner sep=2mm,align=justify,callout absolute pointer={#1},text width=4cm},
    % Junction style (small circles)
    fjunc/.style = {fbase, circle, inner sep=0mm,text width=1mm,,minimum size=2mm},
    % Off-page connector style (Trapezoid)
    fnext/.style = {fbase, inner xsep=1mm,inner ysep=0.5mm,chamfered rectangle,chamfered rectangle ysep=0.5cm,chamfered rectangle xsep=0.5cm,chamfered rectangle corners={south west,south east},text width=2mm},
    % Matrix style but outside of a matrix
    matrixoutstyle/.style ={draw,line width=0.75pt, anchor=center,fill=gray!50, text centered, rounded corners=0.1cm, minimum width=1cm, minimum height=5mm, minimum width=0.2cm,inner sep=1mm, font=\scriptsize},
    % General Matrix style
    matrixstyle/.style={matrix of nodes, nodes={matrixoutstyle},row sep=0.4cm, column sep=1cm, minimum width=0.2cm,inner sep=0},
    % General tikzstyle
    mytikzstyle/.style={node distance=0.5cm,anchor=center,font=\scriptsize},
    % Pseudocode style
    pcstyle/.style={node distance=-0.15cm},
    % Flowchart style
    fcstyle/.style={row sep=0cm,column sep=0cm,minimum width=1mm,align=center},
    % Flowchart blank node
    fblanku/.style={yshift=0.4cm},
    fblankd/.style={yshift=-0.4cm},
    % To put a node between two others
    between/.style args={#1 and #2}{at = ($(#1)!0.5!(#2)$)},
        % matrix connections
        matc/.style = {ultra thick, draw,-stealth}
  }



	\input{FEtikz}
\input{../_Style/math_macros}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\centering

\tdplotsetmaincoords{60}{110}
\begin{tikzpicture}[scale=4,tdplot_main_coords]
%define polar coordinates for some vector
\pgfmathsetmacro{\rvec}{1.2}
\pgfmathsetmacro{\thetavec}{40}
\pgfmathsetmacro{\phivec}{50}

\coordinate (O) at (0,0,0);

%determine a coordinate (P) using (r,\theta,\phi) coordinates.  This command
%also determines (Pxy), (Pxz), and (Pyz): the xy-, xz-, and yz-projections
%of the point (P).
%syntax: \tdplotsetcoord{Coordinate name without parentheses}{r}{\theta}{\phi}
\tdplotsetcoord{P}{\rvec}{\thetavec}{\phivec}
\tdplotsetcoord{Punit}{\rvec/3}{\thetavec}{\phivec}

%draw figure contents
%--------------------

%draw the main coordinate system axes
\draw[thick,-Latex] (0,0,0) -- (1,0,0) node[anchor=north east]{$1$};
\draw[thick,-Latex] (0,0,0) -- (0,1,0) node[anchor=west]{$2$};
\draw[thick,-Latex] (0,0,0) -- (0,0,1) node[anchor=south]{$3$};

%draw a vector from origin to point (P) 
\draw[color=black!50,line width=0.2cm, cap=round, opacity=0.5] (O) -- (P) node  [color=black,above=0.1cm,opacity=1] {Fiber};

\draw[color=black,dash dot] (O) -- (P);
\draw[-stealth,very thick, label=fiber] (O) -- (Punit) node [below right] {$\tena{d}$};


	% draw the caps of the fibre
	\path (P) [fill=gray, opacity=0.8]circle [radius=0.025cm];

%draw projection on xy plane, and a connecting line
\draw[dashed] (O) -- (Pxy);
\draw[dashed] (P) -- (Pxy);

%draw the angle \phi, and label it
%syntax: \tdplotdrawarc[coordinate frame, draw options]{center point}{r}{angle}{label options}{label}
\tdplotdrawarc{(O)}{0.2}{0}{\phivec}{anchor=north}{$\varphi$}


%set the rotated coordinate system so the x'-y' plane lies within the
%"theta plane" of the main coordinate system
%syntax: \tdplotsetthetaplanecoords{\phi}
\tdplotsetthetaplanecoords{\phivec}

%draw theta arc and label, using rotated coordinate system
\tdplotdrawarc[tdplot_rotated_coords]{(0,0,0)}{0.5}{0}{\thetavec}{anchor=south west}{$\vartheta$}

%draw some dashed arcs, demonstrating direct arc drawing
%\draw[dashed,tdplot_rotated_coords] (\rvec,0,0) arc (0:90:\rvec);
%\draw[dashed] (\rvec,0,0) arc (0:90:\rvec);


%\begin{scope}[tdplot_main_coords]
%\tikzset{%
%% set a left-handed CSYS
%tdplot_rotated_coords/.style = {x={(-1,0,0)},y={(0,-1,0)},z={(0,0,-1)}, shift = {(-14,-4,8)}  }
%}
%
%
%
%\begin{scope}[tdplot_rotated_coords,thick, line cap = round, black!50]
% \draw[] (0,0,0) -- ++(\baselen,0,0) node[anchor=north east, distance = -0.2     ] {\color{black!50}\contour{white}{$\base_1$}} pic [] {xaxisflat};
% \draw[] (0,0,0) -- ++(0,\baselen,0) node[anchor=north west, distance = -0.2     ] {\color{black!50}\contour{white}{$\base_2$}} pic [] {yaxisflat};
% \draw[] (0,0,0) -- ++(0,0,\baselen) node[anchor=west     ] {\color{black!50}\contour{white}{$\base_3$}} pic [] {zaxis};
%\end{scope}
%%
%
%
%
%\end{scope}

\end{tikzpicture}



\end{document}