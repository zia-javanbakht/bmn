%!TEX TS-program = xelatex
%!TeX spellcheck = en_GB

% Load the required package using class
\documentclass[tikz,class=article]{standalone}

%\usepackage{tikz}
\usetikzlibrary{spy,fit,matrix,shapes.callouts,calc,trees,positioning,arrows,chains,shapes.geometric,shapes.multipart,arrows.meta,  decorations.pathreplacing,decorations.text,decorations.pathmorphing,decorations.markings,shapes,matrix,shapes.symbols,patterns,datavisualization,datavisualization.formats.functions,angles,backgrounds}


\usepackage{contour,pgfplots}                    % for outlining text
\usepackage{fontspec}
       \usepackage{tikz-3dplot,comment}
       
       
\usepackage{fontawesome}                          % web fonts

    
    % Monospaced font
    \setmonofont{LibertinusMono-Regular.otf}[
                 Scale=0.8,
                 Path            = ./_Fonts/,
                 Extension       = .otf,
                ]                
    
    % Main text font
    \setmainfont{LibertinusSerif}[%
                 Ligatures       = {Common}, %Numbers={OldStyle}, Variant=01,
                 Path            = ./_Fonts/,
                 Extension       = .otf,
                 UprightFont     = *-Regular,
                 BoldFont        = *-Bold,
                 ItalicFont      = *-Italic,
                 BoldItalicFont  = *-BoldItalic,
                ]
    % Sanserif font
    \setsansfont{LibertinusSans}[
                 Path            = ./_Fonts/,
                 Extension       = .otf,
                 UprightFont     = *-Regular,
                 BoldFont        = *-Bold,
                 ItalicFont      = *-Italic,
                ]
    



\usepackage{mathtools}                            % extension to amsmath which loads it automatically
\usepackage{amsthm}                               % math theorems
\usepackage{mathrsfs}
%\usepackage{amssymb}                             % symbols like \square  (always before unicode-math)
\usepackage{xfrac}                                % slanted fractions 
\usepackage{accents}
%\usepackage[bb=mma,cal=cm,scr=esstix]{mathalfa}
\usepackage{unicode-math}                        % Math for XeLaTeX
\usepackage{stackrel}                             % Enhancements to the \stackrel command


\unimathsetup{math-style=ISO, bold-style=ISO}




    % Math font setting
    \setmathfont{LibertinusMath-Regular}[             % General math font
                 Path            = ./_Fonts/,
                 Extension       = .otf
                 ]
    
    % Requires lm-math package
    \setmathfont{Latin Modern Math}[                  % Calligraphy font for linear operators
                 range           = {cal, bfcal},
                 ]
    
    % Requires tex-gyre-math package
    \setmathfont{TeX Gyre Termes Math}[               % For proper blackboard letters
                 range=bb
                 ]
    
    \setmathfont{XITSMath-Regular}[               % For fraktur
                 Path            = ./_Fonts/,
                 Extension       = .otf,
                 range           = frak,
                 ]
    
    \setmathfont{XITSMath-Bold}[               % For fraktur
                 Path            = ./_Fonts/,
                 Extension       = .otf,
                 range           = bffrak,
                 ]
    
    
    \setmathfont{LibertinusMath-Regular}[             % For upright Greek letters using \mup...
                 Path            = ./_Fonts/,
                 Extension       = .otf,
                 range           = up/{greek,Greek},          
                 math-style      = literal
                 ]
    
    


\newcommand{\code}[1]{\texttt{#1}}



% width and length of pic arrows
\newlength{\picw}
\newlength{\picl}
\setlength{\picw}{0.13pt}
\setlength{\picl}{0.25pt}

\tikzset{
 xaxis/.pic     ={\path[draw, fill,  pic actions] (0,0,0) -- ++(0,0,\picw/2) -- ++(\picl,0,-\picw/2)-- ++ (-\picl,0,-\picw/2) -- cycle;},
 xaxisflat/.pic ={\path[draw, fill,  pic actions] (0,0,0) -- ++(0,\picw/2,0) -- ++(\picl,-\picw/2,0)-- ++ (-\picl,-\picw/2,0) -- cycle;},
 yaxis/.pic     ={\path[draw, fill,  pic actions] (0,0,0) -- ++(0,0,\picw/2) -- ++(0,\picl,-\picw/2)-- ++ (0,-\picl,-\picw/2) -- cycle;},
 yaxisflat/.pic ={\path[draw, fill,  pic actions] (0,0,0) -- ++(\picw/2,0,0) -- ++(-\picw/2,\picl,0)-- ++ (-\picw/2,-\picl,0) -- cycle;}, 
 zaxis/.pic     ={\path[draw, fill,  pic actions] (0,0,0) -- ++(0,\picw/2,0) -- ++(0,-\picw/2,\picl)-- ++ (0,-\picw/2,-\picl) -- cycle;},
 zaxisrot/.pic  ={\path[draw, fill,  pic actions] (0,0,0) -- ++(-\picw/2,0,0) -- ++(\picw/2,0,\picl)-- ++ (+\picw/2,0,-\picl) -- cycle;}
}


% Setting a right-handed 
%\setlength{\unitlength}{1mm}
%\tdplotsetmaincoords{235}{140}

% Dimensions of the plate
\newlength{\plx}
\newlength{\ply}
\newlength{\plt}

\setlength{\plx}{6pt}
\setlength{\ply}{6pt}
\setlength{\plt}{1.2pt}

% Arrow dimensions
\newlength{\annotdim}
\setlength{\annotdim}{5.5pt}

\newlength{\annottext}
\setlength{\annottext}{9pt}

% Force dimension
\newlength{\forcelen}
\setlength{\forcelen}{1.5pt}

\newlength{\baselen}
\setlength{\baselen}{1pt}

% Right-angle annotation 
\newlength{\ang}
\setlength{\ang}{0pt}
\advance \ang by \forcelen
\divide \ang by 8

	% Drawing settings
	\newlength{\marksize}
	\setlength{\marksize}{2pt}




% Packages and macros
%\input{./_Style/MyStyle}

	% Settings
%	\pgfplotsset{compat=newest}


%	\pgfdeclarelayer{background}
%	\pgfsetlayers{background}
%	\pgfsetlayers{background,main,foreground} 



% Flowchart styles
  \tikzset{
   %% Define styles for structural symbols
    %simple node
    snode/.style = {draw,thick,circle, text height = 0.2cm, text width= 0.2cm,inner sep=0, minimum size = 2mm },
    % elements
    myelement/.style = {draw,ultra thick},
    % point load
    pload/.style   = {draw, text width=2cm, rectangle, thick},
    %% Define styles for flowchart symbols
    % basic style
    fbase/.style = {draw, fill=lightgray, inner sep=1mm, semithick},
    % Node label style (plain text)
    nlabel/.style = {label=left:{\small#1}},
    % Process style (Rectangle)
    fproc/.style = {fbase, rectangle,text width=0.75cm},
    % I/O style (Parallelogram)
    fio/.style = {fbase, trapezium, trapezium right angle=120, trapezium left angle=60,text width=0.75cm},
    % Flowchart Connection style (arrows)
    fconc/.style = {thick, draw,-stealth,label={"#1"}},
    % Simple Connection style (lines)
    sconc/.style = {thick, draw,label={"#1"}},
    % Terminal style (ellipse)
    fterm/.style = {fbase, ellipse, inner sep=0.5mm},
    % Decision style (diamond)
    fdeci/.style = {fbase, diamond, inner sep=0mm, minimum size=0.3cm},
    % Extra info bracket style (bracket)
    fbrac/.style = {decorate, decoration={brace}, thick},
    % Intrinsic subprogram style (Splited rectangle)
    fsubin/.style = {fbase,rectangle split, rectangle split parts=3, rectangle split horizontal,semithick,rectangle split empty part width=0.1cm, inner xsep=0.05cm, inner ysep=1mm},
    % External/internal subprogram (Splited rectangle from top)
    fsubex/.style = {fbase, inner sep=0,rectangle split,rectangle split every empty part={},rectangle split empty part height=0cm,rectangle split empty part width=0ex, rectangle split empty part depth=0cm,,rectangle split parts=2, semithick,text height=-0.3cm},
    % Callout style (comments)
    mycallout/.style = {draw,pattern=north west lines, pattern color=lightgray!75, semithick, rectangle callout, inner sep=2mm,align=justify,callout absolute pointer={#1},text width=4cm},
    % Junction style (small circles)
    fjunc/.style = {fbase, circle, inner sep=0mm,text width=1mm,,minimum size=2mm},
    % Off-page connector style (Trapezoid)
    fnext/.style = {fbase, inner xsep=1mm,inner ysep=0.5mm,chamfered rectangle,chamfered rectangle ysep=0.5cm,chamfered rectangle xsep=0.5cm,chamfered rectangle corners={south west,south east},text width=2mm},
    % Matrix style but outside of a matrix
    matrixoutstyle/.style ={draw,line width=0.75pt, anchor=center,fill=gray!50, text centered, rounded corners=0.1cm, minimum width=1cm, minimum height=5mm, minimum width=0.2cm,inner sep=1mm, font=\scriptsize},
    % General Matrix style
    matrixstyle/.style={matrix of nodes, nodes={matrixoutstyle},row sep=0.4cm, column sep=1cm, minimum width=0.2cm,inner sep=0, font=\scriptsize},
    % General tikzstyle
    mytikzstyle/.style={node distance=0.5cm,anchor=center,font=\scriptsize},
    % Pseudocode style
    pcstyle/.style={node distance=-0.15cm},
    % Flowchart style
    fcstyle/.style={row sep=0cm,column sep=0cm,minimum width=1mm,align=center},
    % Flowchart blank node
    fblanku/.style={yshift=0.4cm},
    fblankd/.style={yshift=-0.4cm},
    % To put a node between two others
    between/.style args={#1 and #2}{at = ($(#1)!0.5!(#2)$)}
  }
%	% Math macros
%	\newcommand{\fett}[1]{\mbox{\boldmath$#1$}} % only a help for smaller commands
%	\renewcommand*{\vec}[1]{\lowercase{\fett{\sf#1}}} % vectors
%	\newcommand{\mat}[1]{\uppercase{\fett{\sf#1}}} % matrices
%%	\newcommand{\tena}[1]{\lowercase{\fett{#1}}} % tensors 1. order
%	\newcommand{\tenb}[1]{\uppercase{\fett{#1}}} % tensors 2. order
%	\newcommand{\tend}[1]{{\uppercase{\fett{\mathcal#1}}}} % tensors 4. Stufe
%	\newcommand{\dyad}{\otimes} % dyadic product
%	\newcommand{\skp}{\fett{\cdot\,}} % scalar product
%	\newcommand{\dskp}{\fett{:\,}} % double scalar product
%	\newcommand{\equimust}{\stackrel{\mathrm{!}}{=}}



\input{./_style/math_macros_xelatex.tex}




% Setting a right-handed 
\tdplotsetmaincoords{235}{-40}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\begin{tikzpicture}[tdplot_main_coords,framed]
\begin{scope}



% side surfaces
\path[draw, fill=gray, opacity=0.20] (\plx,0,\plt/2) -- ++(0,\ply,0) -- ++(0,0,-\plt) -- ++(0,-\ply,0) -- cycle;
\path[draw, fill=gray, opacity=0.20] (0,\ply,\plt/2) -- ++(\plx,0,0) -- ++(0,0,-\plt) -- ++(-\ply,0,0) -- cycle;

% 3 axis & bottom layer
\draw[thick] (0,0,0) -- (0,0,\baselen) node[anchor=west] {\contour{white}{$\tena{n}$}} pic[scale=0.65] {zaxis};
\path[draw, fill=gray, opacity=0.20] (0,0,+\plt/2) -- ++(\plx,0,0) -- ++(0,\ply,0) -- ++(-\plx,0,0) -- cycle;

% line at the back of the COORDSYS
\path[draw, fill=gray, opacity=0.20] (0,0,-\plt/2) -- ++(0,0,\plt);

% mid layer
\path[draw, fill=gray, opacity=0.5, dashed]  (0,0,0) -- ++(\plx,0,0) -- ++(0,\ply,0) -- ++(-\plx,0,0) -- cycle;

% 1 and 2 directions
\draw[thick, line cap = round] (0,0,0) -- (\baselen,0,0) node[anchor=south west] {\contour{white}{$\base_1$}} pic [] {xaxisflat};
\draw[thick, line cap = round] (0,0,0) -- (0,\baselen,0) node[anchor=south east] {\contour{white}{$\base_2$}} pic [] {yaxisflat};

% top layer
\path[draw, fill=gray, opacity=0.20] (0,0,-\plt/2) -- ++(\plx,0,0) -- ++(0,\ply,0) -- ++(-\plx,0,0) -- cycle;


% Forces & moments
%\begin{scope}[color=blue, line cap = round]
%\draw[thick] (\plx,\ply/2,0) -- ++(\forcelen,0,0) node[anchor=north west, xshift=2] {$N_{11}$} pic[] {xaxisflat};
%\draw[thick] (\plx/2,\ply,0) -- ++(0,\forcelen,0) node[anchor=north east, xshift=2] {$N_{22}$} pic[] {yaxisflat};
%
%\draw[thick] (\plx/2,\ply,0) -- ++(\forcelen,0,0) node[anchor=north west, xshift=2] {\contour{white}{\color{blue}$N_{21}$}} pic[] {xaxis};
%\draw[thick] (\plx,\ply/2,0) -- ++(0,\forcelen,0) node[anchor=north east, xshift=2] {\contour{white}{\color{blue}$N_{12}$}} pic[] {yaxis};
%\end{scope}
%
%\begin{scope}[color=red, line cap = round]
%\draw[thick] (\plx,\ply/2,0) -- ++(0,0,+\forcelen) node[anchor=west] {\contour{white}{\color{red}$q_1$}} pic[] {zaxis};
%\draw[thick] (\plx/2,\ply,0) -- ++(0,0,+\forcelen) node[anchor=west] {\contour{white}{\color{red}$q_2$}} pic[] {zaxisrot};
%\end{scope}


\begin{scope}[color=orange!30!red!90!black, line cap = round]
\draw[thick, line cap = round] (\plx,\ply/2,0) -- ++(\forcelen,0,0)  node[anchor=north west, xshift=\picl+8] {$M_{11}$} pic foreach \x in {0,\picl/0.9} at +(\x,0,0) []  {xaxisflat};
\draw[thick, line cap = round] (\plx,\ply/2,0) -- ++(0,\forcelen,0)  node[anchor=south east, yshift=\picl] {\color{orange!30!red!90!black}\contour{white}{$M_{12}$}}  pic foreach \x in {0,\picl/0.9} at +(0,\x,0) []  {yaxis};


\draw[thick, line cap = round] (\plx/2,\ply,0) -- ++(0,\forcelen,0)  node[anchor=north east, xshift=\picl-8] {$M_{22}$}  pic foreach \x in {0,\picl/0.9} at +(0,\x,0) []  {yaxisflat};
\draw[thick, line cap = round] (\plx/2,\ply,0) -- ++(\forcelen,0,0)  node[anchor=north west, yshift=\picl-8] {\color{orange!30!red!90!black}\contour{white}{$M_{21}$}}  pic foreach \x in {0,\picl/0.9} at +(\x,0,0) []  {xaxis};


\end{scope}



%% Dimensions
%\begin{scope}[{Classical TikZ Rightarrow[length=\annotdim, width=\annotdim/2]}-{Classical TikZ Rightarrow[length=\annotdim, width=\annotdim/2]}  ]
%
%% height
%\path[draw] (-0.2,\ply+.2,-\plt/2) -- ++ (0,0,+\plt/2);
%\path[draw] (-0.2,\ply+.2,+\plt/2) -- ++ (0,0,-\plt/2) node [at end, left] {$\textstyle 2\times \frac{h}{2}$};
%
%% Length
%\path[draw] (0,\ply+.2,\plt-0.1) -- ++ (\plx,0,0) node [midway, below left] {$l_1$};
%\path[draw] (\plx+0.2,0,\plt-0.1) -- ++ (0,\ply,0) node [midway, below right] {$l_2$};
%
%\end{scope}
%
%% Annotation
%\begin{scope}[-{Kite[fill=white, length=\annottext]}]
% \path[draw] (\plx+1,1,-1.5) -- (\plx,1.5,0) node [pos=0.1, anchor=south west] {Middle-plane};
%\end{scope}


\end{scope}



\end{tikzpicture}



\end{document}