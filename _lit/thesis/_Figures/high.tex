%!TEX TS-program = xelatex
%!TeX spellcheck = en_GB

% Load the required package using class
\documentclass[tikz,class=article]{standalone}

%\usepackage{tikz}
\usetikzlibrary{spy,fit,matrix,shapes.callouts,calc,trees,positioning,arrows,chains,shapes.geometric,shapes.multipart,arrows.meta,  decorations.pathreplacing,decorations.text,decorations.pathmorphing,decorations.markings,shapes,matrix,shapes.symbols,patterns,datavisualization,datavisualization.formats.functions,angles,backgrounds}


\usepackage{contour,pgfplots}                    % for outlining text
\usepackage{fontspec}
              
    
\usepackage{fontawesome}                          % web fonts

    
    % Monospaced font
    \setmonofont{LibertinusMono-Regular.otf}[
                 Scale=0.8,
                 Path            = ./_Fonts/,
                 Extension       = .otf,
                ]                
    
    % Main text font
    \setmainfont{LibertinusSerif}[%
                 Ligatures       = {Common}, %Numbers={OldStyle}, Variant=01,
                 Path            = ./_Fonts/,
                 Extension       = .otf,
                 UprightFont     = *-Regular,
                 BoldFont        = *-Bold,
                 ItalicFont      = *-Italic,
                 BoldItalicFont  = *-BoldItalic,
                ]
    % Sanserif font
    \setsansfont{LibertinusSans}[
                 Path            = ./_Fonts/,
                 Extension       = .otf,
                 UprightFont     = *-Regular,
                 BoldFont        = *-Bold,
                 ItalicFont      = *-Italic,
                ]
    



\usepackage{mathtools}                            % extension to amsmath which loads it automatically
\usepackage{amsthm}                               % math theorems
\usepackage{mathrsfs}
%\usepackage{amssymb}                             % symbols like \square  (always before unicode-math)
\usepackage{xfrac}                                % slanted fractions 
\usepackage{accents}
%\usepackage[bb=mma,cal=cm,scr=esstix]{mathalfa}
\usepackage{unicode-math}                        % Math for XeLaTeX
\usepackage{stackrel}                             % Enhancements to the \stackrel command


\unimathsetup{math-style=ISO, bold-style=ISO}




    % Math font setting
    \setmathfont{LibertinusMath-Regular}[             % General math font
                 Path            = ./_Fonts/,
                 Extension       = .otf
                 ]
    
    % Requires lm-math package
    \setmathfont{Latin Modern Math}[                  % Calligraphy font for linear operators
                 range           = {cal, bfcal},
                 ]
    
    % Requires tex-gyre-math package
    \setmathfont{TeX Gyre Termes Math}[               % For proper blackboard letters
                 range=bb
                 ]
    
    \setmathfont{XITSMath-Regular}[               % For fraktur
                 Path            = ./_Fonts/,
                 Extension       = .otf,
                 range           = frak,
                 ]
    
    \setmathfont{XITSMath-Bold}[               % For fraktur
                 Path            = ./_Fonts/,
                 Extension       = .otf,
                 range           = bffrak,
                 ]
    
    
    \setmathfont{LibertinusMath-Regular}[             % For upright Greek letters using \mup...
                 Path            = ./_Fonts/,
                 Extension       = .otf,
                 range           = up/{greek,Greek},          
                 math-style      = literal
                 ]
    
    


\newcommand{\code}[1]{\texttt{#1}}






% Packages and macros
%\input{./_Style/MyStyle}

	% Settings
%	\pgfplotsset{compat=newest}


%	\pgfdeclarelayer{background}
%	\pgfsetlayers{background}
%	\pgfsetlayers{background,main,foreground} 



% Flowchart styles
  \tikzset{
   %% Define styles for structural symbols
    %simple node
    snode/.style = {draw,thick,circle, text height = 0.2cm, text width= 0.2cm,inner sep=0, minimum size = 2mm },
    % elements
    myelement/.style = {draw,ultra thick},
    % point load
    pload/.style   = {draw, text width=2cm, rectangle, thick},
    %% Define styles for flowchart symbols
    % basic style
    fbase/.style = {draw, fill=lightgray, inner sep=1mm, semithick},
    % Node label style (plain text)
    nlabel/.style = {label=left:{\small#1}},
    % Process style (Rectangle)
    fproc/.style = {fbase, rectangle,text width=0.75cm},
    % I/O style (Parallelogram)
    fio/.style = {fbase, trapezium, trapezium right angle=120, trapezium left angle=60,text width=0.75cm},
    % Flowchart Connection style (arrows)
    fconc/.style = {thick, draw,-stealth,label={"#1"}},
    % Simple Connection style (lines)
    sconc/.style = {thick, draw,label={"#1"}},
    % Terminal style (ellipse)
    fterm/.style = {fbase, ellipse, inner sep=0.5mm},
    % Decision style (diamond)
    fdeci/.style = {fbase, diamond, inner sep=0mm, minimum size=0.3cm},
    % Extra info bracket style (bracket)
    fbrac/.style = {decorate, decoration={brace}, thick},
    % Intrinsic subprogram style (Splited rectangle)
    fsubin/.style = {fbase,rectangle split, rectangle split parts=3, rectangle split horizontal,semithick,rectangle split empty part width=0.1cm, inner xsep=0.05cm, inner ysep=1mm},
    % External/internal subprogram (Splited rectangle from top)
    fsubex/.style = {fbase, inner sep=0,rectangle split,rectangle split every empty part={},rectangle split empty part height=0cm,rectangle split empty part width=0ex, rectangle split empty part depth=0cm,,rectangle split parts=2, semithick,text height=-0.3cm},
    % Callout style (comments)
    mycallout/.style = {draw,pattern=north west lines, pattern color=lightgray!75, semithick, rectangle callout, inner sep=2mm,align=justify,callout absolute pointer={#1},text width=4cm},
    % Junction style (small circles)
    fjunc/.style = {fbase, circle, inner sep=0mm,text width=1mm,,minimum size=2mm},
    % Off-page connector style (Trapezoid)
    fnext/.style = {fbase, inner xsep=1mm,inner ysep=0.5mm,chamfered rectangle,chamfered rectangle ysep=0.5cm,chamfered rectangle xsep=0.5cm,chamfered rectangle corners={south west,south east},text width=2mm},
    % Matrix style but outside of a matrix
    matrixoutstyle/.style ={draw,line width=0.75pt, anchor=center,fill=gray!50, text centered, rounded corners=0.1cm, minimum width=1cm, minimum height=5mm, minimum width=0.2cm,inner sep=1mm, font=\scriptsize},
    % General Matrix style
    matrixstyle/.style={matrix of nodes, nodes={matrixoutstyle},row sep=0.4cm, column sep=1cm, minimum width=0.2cm,inner sep=0, font=\scriptsize},
    % General tikzstyle
    mytikzstyle/.style={node distance=0.5cm,anchor=center,font=\scriptsize},
    % Pseudocode style
    pcstyle/.style={node distance=-0.15cm},
    % Flowchart style
    fcstyle/.style={row sep=0cm,column sep=0cm,minimum width=1mm,align=center},
    % Flowchart blank node
    fblanku/.style={yshift=0.4cm},
    fblankd/.style={yshift=-0.4cm},
    % To put a node between two others
    between/.style args={#1 and #2}{at = ($(#1)!0.5!(#2)$)}
  }


%%%%%%%%%%%%%%%%%
%% RANDOM fibers

\newcommand{\fiber}[3]{
\begin{scope}[scale=#2, rotate=#3]
  \coordinate (A) at (#1);
  \draw[thick] (A)--+(2,2);
\end{scope}
}

\newcommand{\fiberbox}[3]{
\begingroup
\coordinate (A) at (#1);
\draw [very thick,fill=black!10] ($(A)+(-#2,-#2)$) rectangle ($(A)+(#2,#2)$);
\node [below = 1.25cm of A] {#3};
\endgroup
}

\newcommand{\midfiberbox}[3]{
\begingroup
\coordinate (A) at (#1);
\draw [very thick,fill=black!10] ($(A)+(-#2,-#2)$) rectangle ($(A)+(#2,#2)$);
\node at (A) {#3};
\endgroup
}


\newcommand{\minorfiber}[2]{
  \foreach \x in {1,2,...,#2}{
  \coordinate (b) at ($(#1)+(rand*0.25,rand*0.15)$);
 \begin{scope}[scale=0.12, rotate=360*rand]
  \draw[thick] (b) -- + (2,2);
 \end{scope}
   }
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\begin{tikzpicture}[]
  \datavisualization [scientific axes,
    visualize as smooth line/.list={i1,i2,i3,i4,i5}, 
    x axis = {length=7.5cm,ticks={step=0.1},label={$S_{\text w}$}},
    y axis = {length=5.5cm,ticks={step=0.01,%
    style={/pgf/number format/fixed,%
           /pgf/number format/fixed zerofill,%
    /pgf/number format/precision=2}, minor steps between steps=1}, label={$k_{\text{eff}}$ ($\frac{\text{W}}{\text{m}\cdot\text{K}}$)}},
  new legend entry={%text=Increment:,
  visualizer in legend={\node[xshift=-0.25cm] (0,0) {$\zeta_{\text l}$:};}
  },
      style sheet=vary dashing,
  i1={style={mark=*,mark options={scale=0.75}},label in legend={text=0.1}},
  i2={style={mark=*,mark options={fill=white,scale=0.75}},label in legend={text=0.2}},
  i3={style={mark=triangle*},label in legend={text=0.3}},
  i4={style={mark=triangle*,mark options={fill=white}},label in legend={text=0.4}},
  i5={style={mark=square*,mark options={scale=0.75}},label in legend={text=0.5}}
  ]
  data [set=i1]{%original truss
    x, y
0	  ,0.30835
0.1	,0.31138
0.2	,0.31434
0.3	,0.31707
0.4	,0.31975
0.5	,0.32204
0.6	,0.32442
0.7	,0.32658
0.8	,0.32861
0.9	,0.33048
1  	,0.3323
  }
  data [set=i2]{% attempt 1
    x, y
0  	,0.29568
0.1	,0.3017
0.2	,0.30727
0.3	,0.31255
0.4	,0.31749
0.5	,0.32238
0.6	,0.32689
0.7	,0.33132
0.8	,0.33545
0.9	,0.33944
1  	,0.34318
  }
  data [set=i3]{% attempt 2
    x, y
0  ,	0.28382
0.1,	0.29212
0.2,	0.30027
0.3,	0.30795
0.4,	0.31557
0.5,	0.32257
0.6,	0.32942
0.7,	0.33606
0.8,	0.34253
0.9,	0.34869
1  ,	0.35459
  }
  data [set=i4]{% attempt 3
    x, y
0	  ,0.27262
0.1	,0.28331
0.2	,0.29367
0.3	,0.30376
0.4	,0.31345
0.5	,0.32296
0.6	,0.33222
0.7	,0.34105
0.8	,0.34981
0.9	,0.35836
1	  ,0.36662
  }
  data [set=i5]{% attempt 4
    x, y
0	  ,0.26219
0.1	,0.2747
0.2	,0.28711
0.3	,0.29933
0.4	,0.31138
0.5	,0.32302
0.6	,0.33475
0.7	,0.34608
0.8	,0.35732
0.9	,0.36825
1	  ,0.37917
  };
  \end{tikzpicture}

\end{document}